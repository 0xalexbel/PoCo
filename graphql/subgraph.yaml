specVersion: 0.0.1
description: iExecPoCoV3
repository: https://github.com/iExecBlockchainComputing/PoCo-dev
schema:
  file: ./schema.graphql
dataSources:
# ============================== iExec Interface ==============================
  - kind: ethereum/contract
    name: IexecInterface
    network: ganache
    source:
      address: '0xAB5047aDAFa5493f885343FeF3c55241a51E7027'
      abi: IexecInterface
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - Category
        - Deal
        - Task
        - Contribution
      abis:
        - name: IexecInterface
          file: ../build/contracts/IexecInterfaceNative.json
      blockHandlers:
        - handler: handleBlock
      file: ./src/mapping_core.ts
# =============================== App registry ================================
  - kind: ethereum/contract
    name: AppRegistry
    network: ganache
    source:
      address: '0x1b1A4149cAAE1b68a3A3Cf344D25bF5587831Cb8'
      abi: AppRegistry
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - App
      abis:
        - name: AppRegistry
          file: ../build/contracts/AppRegistry.json
      callHandlers:
        - function: createApp(address,string,string,bytes,bytes32,bytes)
          handler: handleCreateAppCall
      file: ./src/mapping_apps.ts
# ============================= Dataset registry ==============================
  - kind: ethereum/contract
    name: DatasetRegistry
    network: ganache
    source:
      address: '0x5f5fA88B291CaBd3b95E7B6e2b0e10474Ef9123D'
      abi: DatasetRegistry
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - Dataset
      abis:
        - name: DatasetRegistry
          file: ../build/contracts/DatasetRegistry.json
      callHandlers:
        - function: createDataset(address,string,bytes,bytes32)
          handler: handleCreateDatasetCall
      file: ./src/mapping_datasets.ts
# ============================ Workerpool registry ============================
  - kind: ethereum/contract
    name: WorkerpoolRegistry
    network: ganache
    source:
      address: '0x9890E75269D192Fe21E25E0Dfe2dEEbf4EeC9Ad9'
      abi: WorkerpoolRegistry
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - Workerpool
      abis:
        - name: WorkerpoolRegistry
          file: ../build/contracts/WorkerpoolRegistry.json
      callHandlers:
        - function: createWorkerpool(address,string)
          handler: handleCreateWorkerpoolCall
      file: ./src/mapping_workerpools.ts
